<% @parent = @parent.decorate %>
<% title = "Add attachment" %>
<% page_title title, errors: @errors.any? %>
<% content_for :after_header do %>
  <%= link_to "Back to #{@parent.pretty_description.downcase}", path_for_model(@parent), class: "govuk-back-link" %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">
    <%= error_summary(@errors) %>
    <span class="govuk-caption-l"><%= @parent.pretty_description %></span>
    <h1 class="govuk-heading-l"><%= title %></h1>

    <%= form_with scope: :document, url: wizard_path, method: :put, local: true, multipart: true do |form| %>
      <%= govukFileUpload(
        id: "base",
        name: "document[file][file]",
        label: {
          text: "Upload a file"
        },
        errorMessage: (@errors.any? ? { text: @errors.full_messages.to_sentence } : nil)
      ) %>

      <%= govukButton(text: "Upload") %>
    <% end %>
  </div>
</div>
