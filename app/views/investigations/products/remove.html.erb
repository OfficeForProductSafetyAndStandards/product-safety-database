<%= page_title "Remove #{@product.name}" %>
<% content_for :back_link do %>
  <%= govukBackLink(
    text: "Back to #{@investigation.pretty_description.downcase}",
    href: investigation_products_path(@investigation)
  ) %>
<% end %>

<%= render "investigations/pages_top", investigation: @investigation %>

<%= error_summary @remove_product_form.errors %>
<h1 class="govuk-heading-l"><%= "Remove #{@product.name}" %></h1>
<p>Remove a product from a case if it's not relevant to the investigation. Product details can be changed from the <%= link_to "Products tab", investigation_products_path(@investigation) %></p>

<%= form_with scope: :investigation, model: @remove_product_form, url: unlink_investigation_product_path(@investigation), html: {novalidate: true}, builder: ApplicationFormBuilder, method: :delete, local: true do |form| %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">

      <%= form.govuk_radios :remove_product, legend: "Do you want to remove the product from the case?", items: [{ text: "Yes", value: "true", conditional: { html: form.govuk_text_area(:reason, label_classes: "govuk-label", label: "Reason for removing the product from the case")} },  { text: "No", value: "false" }] %>

      <div class="govuk-form-group">
        <%= form.submit "Submit", class: "govuk-button govuk-button--warning" %>
        <p><%= link_to "Cancel", investigation_products_path(@investigation), class: "govuk-link--no-visited-state" %></p>
      </div>
    </div>
  </div>
<% end %>
