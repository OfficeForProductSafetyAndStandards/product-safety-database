<% badges = [] %>
<% if investigation.coronavirus_related? %>
  <% badges << capture do %>
    <%= tag.span t(:coronavirus_related, scope: "case.badges"),
          class: "opss-tag opss-tag--covid"
    %>
  <% end %>
<% end %>
<% if investigation.serious? %>
  <% badges << capture do %>
    <%= tag.span t(:risk_level_serious, scope: "case.badges"),
          class: "opss-tag opss-tag--risk1"
    %>
  <% end %>
<% end %>
<% if investigation.high? %>
  <% badges << capture do %>
    <%= tag.span t(:risk_level_high, scope: "case.badges"),
          class: "opss-tag opss-tag--risk1"
    %>
  <% end %>
<% end %>
<% if investigation.is_closed? %>
  <% badges << capture do %>
    <%= tag.span t(:closed, scope: "case.badges"),
          class: "opss-tag opss-tag--risk3"
    %>
  <% end %>
<% end %>
<% if investigation.is_private? %>
  <% badges << capture do %>
    <%= tag.span t(:restricted, scope: "case.badges"),
          class: "opss-tag opss-tag--risk2"
    %>
  <% end %>
<% end %>

<tr class="govuk-table__row">
  <th headers="<%= dom_id investigation, :item %>" id="<%= dom_id investigation, :status %>" class="govuk-visually-hidden">
    Type
  </th>
  <td headers="<%= dom_id investigation, :item %> <%= dom_id investigation, :status %>" colspan="3" class="govuk-table__cell">
    <%= tag.span investigation.case_type.upcase_first, class: class_names("opss-tag", "opss-tag--std", investigation.is_closed? && "opss-cross-through") %>
    <% badges.each do |badge| %>
      <span class="govuk-visually-hidden"> | </span>
      <%= badge %>
    <% end %>
  </td>
</tr>
