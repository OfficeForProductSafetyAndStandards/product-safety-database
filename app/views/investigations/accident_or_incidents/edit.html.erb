<% page_heading = "Edit #{@accident_or_incident.type.downcase}" %>
<% page_title page_heading %>

<% content_for :back_link do %>
  <%= govukBackLink(
    text: "Back",
    href: investigation_accident_or_incident_path(@investigation, @accident_or_incident)
  ) %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">
    <%= form_with(model: @accident_or_incident_form, local: true,  url: investigation_accident_or_incident_path(@investigation, @accident_or_incident), method: :patch, builder: ApplicationFormBuilder, html: {novalidate: true}) do |form| %>
      <%= error_summary(@accident_or_incident_form.errors, %i[is_date_known date investigation_product_id usage severity severity_other]) %>

      <span class="govuk-caption-l"><%= @investigation.pretty_description %></span>
      <h1 class="govuk-heading-l"><%= page_heading %></h1>

      <%= render "form", form: form, accident_or_incident_form: @accident_or_incident_form, investigation: @investigation, type: @accident_or_incident.type %>

      <%= govukButton text: "Update #{@accident_or_incident.type.downcase}" %>
    <% end %>
  </div>
</div>
