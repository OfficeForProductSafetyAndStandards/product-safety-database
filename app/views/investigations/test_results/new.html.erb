<% page_title = "Record test result" %>
<%= page_title page_title, errors: @test_result_form.errors.any? %>

<% content_for :back_link do %>
  <%= govukBackLink(
    text: "Back",
    href: investigation_supporting_information_index_path(@investigation)
  ) %>
<% end %>

<%= render "investigations/pages_top", investigation: @investigation %>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with model: @test_result_form, scope: :test_result, local: true, builder: ApplicationFormBuilder, html: {novalidate: true}, url: investigation_test_results_path(@investigation.pretty_id) do |form| %>
      <%= error_summary(@test_result_form.errors, %i[legislation standards_product_was_tested_against date result failure_details base])%>

      <h1 class="govuk-heading-l"><%= page_title %></h1>

      <%= render "form", form: form, test_result_form: @test_result_form, investigation: @investigation, allow_product_linking: true %>

      <div class="govuk-button-group">
        <%= govukButton text: "Add test result" %>
        <%= link_to "Cancel", investigation_supporting_information_index_path(@investigation), class: "govuk-link govuk-link--no-visited-state" %>
      </div>
    <% end %>
  </div>
</div>