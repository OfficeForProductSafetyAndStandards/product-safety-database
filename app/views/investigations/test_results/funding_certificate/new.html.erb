<% page_title = "The test certificate details" %>
<%= page_title page_title, errors: @test_certificate_form.errors.any? %>

<% content_for :after_header do %>
  <%= govukBackLink text: "Back", href: new_investigation_funding_source_path(@investigation) %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with(model: @test_certificate_form, url: investigation_funding_certificate_path(investigation_pretty_id: @investigation.pretty_id), builder: ApplicationFormBuilder) do |form| %>
      <%= error_summary(@test_certificate_form.errors, %i[opss_funded]) %>

      <h1 class="govuk-heading-l govuk-!-margin-bottom-3"><%= page_title %></h1>
      <p class="govuk-body govuk-!-margin-bottom-6 opss-secondary-text">These details will help the <abbr>OPSS</abbr> match funding to individual tests.</p>

      <%= govukInput(
        key: :tso_certificate_reference_number,
        form: form,
        classes: "govuk-!-width-one-third",
        label: { html: "What is the <abbr title='Trading Standards Officer'>TSO</abbr> Sample Reference Number?".html_safe },
        hint: { html: "The reference number, for a specific product, that was<br>provided to the test lab for product testing.".html_safe, classes: "govuk-!-font-size-16" }
      ) %>

      <%= form.govuk_date_input :tso_certificate_issue_date, legend: "What date was the test certificate issued?", hint: "For example, 12 5 2023", classes: "govuk-fieldset__legend govuk-!-font-size-16" %>

      <%= govukButton(text: "Continue") %>
    <% end %>
  </div>
</div>
