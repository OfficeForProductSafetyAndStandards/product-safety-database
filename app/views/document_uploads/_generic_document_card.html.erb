<%
  title = @document_upload.title
  safe = @document_upload.file_upload.metadata["safe"]
%>

<div class="govuk-grid-row govuk-!-padding-bottom-4">

  <div class="govuk-grid-column-two-thirds-from-desktop">
    <div class="app-generic-attachment__thumbnail">
      <% if @document_upload.file_upload.metadata["safe"] %>
        <%= document_upload_placeholder(@document_upload) %>
      <% else %>
        <div class="app-document-preview__processing">
          <span><%= "Processing #{image_document_text(@document_upload)}" %></span>
        </div>
      <% end %>
    </div>

    <div class="app-generic-attachment__metadata">
      <h2 class="govuk-heading-m govuk-!-margin-bottom-1"><%= title %></h2>
      <span class="govuk-hint govuk-!-font-size-16">
        <%= formatted_document_upload_updated_date(@document_upload) %>
      </span>

      <p class="govuk-body"><%= @document_upload.description %></p>

      <% if safe %>
        <%= link_with_hidden_text_to "View #{document_upload_pretty_type_description(@document_upload)}",
            "(#{title}, opens in new tab)",
            @document_upload,
            class: "govuk-link app-block-link govuk-!-margin-right-3",
            target: '_blank',
            rel: 'noopener' %>

        <%= render "document_uploads/document_upload_card_links", document_upload: @document_upload, parent: @parent %>
      <% end %>
    </div>

  </div>

</div>
